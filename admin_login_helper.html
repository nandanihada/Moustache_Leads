<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Login Helper</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 50px auto; padding: 20px; }
        .token-box { background: #f5f5f5; padding: 15px; border-radius: 5px; margin: 10px 0; }
        .button { background: #007cba; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }
        .button:hover { background: #005a87; }
        .success { color: green; font-weight: bold; }
        .error { color: red; font-weight: bold; }
    </style>
</head>
<body>
    <h1>üîß Admin Login Helper</h1>
    <p>Use this helper to login as admin and test the placement approval system.</p>
    
    <div class="token-box">
        <h3>Admin Token:</h3>
        <code id="adminToken">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjhlNGU0MWE0YWQ2NjI1NjNmZGI1NjhhIiwidXNlcm5hbWUiOiJhZG1pbiIsImV4cCI6MTc2MzExMDYxNCwiaWF0IjoxNzYzMDI0MjE0fQ.1i9ETFH23lGhwNwygcPhs9kzxU2Wd3FiBvfnpYb0kO0</code>
        <br><br>
        <button class="button" onclick="copyToken()">üìã Copy Token</button>
        <button class="button" onclick="setTokenInLocalStorage()">üíæ Set in LocalStorage</button>
        <button class="button" onclick="testAdminAPI()">üß™ Test Admin API</button>
    </div>
    
    <div id="result"></div>
    
    <h3>üìã Steps to Test:</h3>
    <ol>
        <li><strong>Set Token:</strong> Click "Set in LocalStorage" button above</li>
        <li><strong>Open App:</strong> Go to <a href="http://localhost:3000/admin/placement-approval" target="_blank">http://localhost:3000/admin/placement-approval</a></li>
        <li><strong>Check Console:</strong> Open browser DevTools (F12) and check console for debug logs</li>
        <li><strong>Verify Data:</strong> You should see 7 pending placements</li>
    </ol>
    
    <h3>üîç Debug Info:</h3>
    <ul>
        <li><strong>Admin User:</strong> admin@moustacheleads.com</li>
        <li><strong>Backend Status:</strong> ‚úÖ Working (7 placements found)</li>
        <li><strong>API Endpoint:</strong> http://localhost:5000/api/placements/admin/all</li>
        <li><strong>Pending Placements:</strong> 7 (all need approval)</li>
    </ul>

    <script>
        function copyToken() {
            const token = document.getElementById('adminToken').textContent;
            navigator.clipboard.writeText(token).then(() => {
                showResult('‚úÖ Token copied to clipboard!', 'success');
            });
        }
        
        function setTokenInLocalStorage() {
            const token = document.getElementById('adminToken').textContent;
            localStorage.setItem('token', token);
            showResult('‚úÖ Admin token set in localStorage! You can now access admin pages.', 'success');
        }
        
        async function testAdminAPI() {
            const token = document.getElementById('adminToken').textContent;
            showResult('üîÑ Testing admin API...', '');
            
            try {
                const response = await fetch('http://localhost:5000/api/placements/admin/all', {
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    showResult(`‚úÖ API Test Success! Found ${data.placements.length} placements (Total: ${data.total})`, 'success');
                } else {
                    showResult(`‚ùå API Test Failed: ${response.status} ${response.statusText}`, 'error');
                }
            } catch (error) {
                showResult(`‚ùå API Test Error: ${error.message}`, 'error');
            }
        }
        
        function showResult(message, type) {
            const result = document.getElementById('result');
            result.innerHTML = `<p class="${type}">${message}</p>`;
        }
    </script>
</body>
</html>
